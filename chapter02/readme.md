# 2장 객체를 활용한 테스트 주도 개발

## 2.1 객체망

- 객체지향 설계
    - 객체 자체보다는 객체 간의 의사소통에 집중한다.
    - 객체는 메시지를 주고받으며 반응한다.
    - 메시지를 처리하는 메서드(method)를 가지고 있으며, 내부 상태를 캡슐화한다.
- 객체 지향 시스템
    - 객체 지향 시스템은 협업하는 객체들의 망(Network)으로 구성된다.
    - 시스템의 행위는 객체의 조합(객체의 선택과 연결 방식)을 통해 나타난다.
- 객체의 구성을 관리하는 코드를 객체망의 행위에 대한 선언적(declarative) 정의라고 한다.
- 이런 시스템은 방법(how)이 아닌 목적(what)에 집중할 수 있어 시스템의 행위를 변경하기 쉽다.

## 2.2 값과 객체

- 시스템을 설계할 때 값(value)과 객체(object)의 구분이 중요하다.
    - 값: 변하지 않는 양이나 크기
    - 객체: 시간이 지남에 따라 상태가 변할 수 있으며, 식별자(identity)를 가지는 계산 철자(computational process)
- 값 (Value)
    - 고정된 불변 인스턴스로, 상태가 같다면 동일하다.
    - 별도의 식별자는 의미가 없다.
    - 값 비교 시 식별자(`==`)가 아니라 내용 비교(`equals`)를 사용해야 한다.
- 객체 (Object)
    - 변경 가능한 상태를 이용해 시간의 흐름에 따른 객체의 행위를 나타낸다.
    - 같은 타입이고 동일한 상태를 가지고 있어도 별도의 식별자를 지닌다.
    - 향후 어떤 메시지를 전달받느냐에 따라 상태가 달라질 수 있다.
- 실무에서는 시스템을 기능적으로 다루는 값과 시스템에서 상태를 지닌 행위를 구현하는 객체 두 가지 '진영'으로 나눠 바라볼 수 있다.

## 2.3 메시지를 따르라

- 다른 객체와 쉽게 관계를 맺을 수 있도록 객체를 설계하면, 고수준의 선언적 접근법의 이점을 얻을 수 있다.
- 이는 객체가 일반적인 의사소통 패턴을 따르고, 객체 간의 의존성이 명시적임을 의미한다.
- 의사소통 패턴
    - 객체들이 서로 어떻게 상호 작용하는지 관장하는 각종 규칙 집합
        - 객체의 역할
        - 전달 가능한 메시지
        - 메시지를 전달할 수 있는 시점
- 자바같은 언어는 구현 클래스 대신 추상 인터페이스를 통해 객체의 역할을 드러내는 것이 적절하다.
- 도메인 모델은 객체 간 관계에 의미를 부여하는 의사소통 패턴에 속한다.
- 시스템을 의사소통 구조 관점에서 바라보면, 의사소통 구조는 정적인 분류에서 개념적으로 발전된 개념이다.
- 하지만 의사소통 패턴은 프로그래밍 언어로 명확하게 표현되지 않기 때문에 도메인 모델은 명확하게 드러나지 않는다.
- 정적인 분류와 동적인 의사소통 간의 불일치로 인해 설계가 복잡해진다.
    - 정적인 분류: 상속은 공통 기능 공유에는 유용하지만, 여러 역할을 표현하기에는 한계가 있다.
    - 동적인 의사소통: 객체는 상황에 따라 다양한 역할을 수행하므로, 단순한 계층 구조만으로는 표현하기 어렵다.

> 역할, 책임, 협력자
>
> - 역할(Role): 관련된 책임들의 집합
> - 책임(Responsibility): 객체가 수행해야 하는 과업이나 알아야 할 정보
> - 협력(Collaboration): 객체나 역할(또는 둘 다)의 상호작용


